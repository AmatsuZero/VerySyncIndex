<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta name="robots" content="index,follow">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <meta name="theme-color" content="#ffb549">
    <meta name="application-name" content="神KEY-基于微力同步的资源网站">
    <meta name="color-scheme" content="dark light">
    <title>神KEY-基于微力同步的资源网站</title>
    <link href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAKlBMVEUAAADSZDfSZDfryaDSZDe0RjLrh0u/UTTWaTpLP07///9dU2BaT13ryaCZFnJdAAAABHRSTlMAzPl3IDm31QAAAAFiS0dECmjQ9FYAAAAHdElNRQfmAgUJCiJhiWOMAAAAbUlEQVQI12NgcGAAAhYgDhEA0q5ARqgLA4NLKIgR4pbmCmKUeqSlpYUDGSpuQEYKkOGSBgJIDBaXWWlpq9MSGFjcZqelzQEyXNzSIHJ3715LS8u9e5eB+e61zG25dw2A2kAMBjAAmwICvBeABAC90CPadJikOwAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMi0wMi0wNVQwNjoxMDozNCswMzowMCU/+JYAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjItMDItMDVUMDY6MTA6MzQrMDM6MDBUYkAqAAAAAElFTkSuQmCC" rel="icon" />
    <style>*{font-family:"Microsoft YaHei";}.center,h1,h4{text-align:center}.right{float:right;display:block}table.GeneratedTable{width:100%;background-color:#fff;border-collapse:collapse;border:2px solid #ffb549;color:#000}table.GeneratedTable td,table.GeneratedTable th{border:2px solid #ffb549;padding:3px}table.GeneratedTable thead{background-color:#ffb549}.tableizer-table td,table.tableizer-table{border:1px solid #ccc}.tableizer-table td{padding:4px;margin:3px}.tableizer-title{background-color:#104e8b;color:#fff;font-weight:700}a{text-decoration:none}.tableizer-title a{color:#fff}.msg{background: #eb4646;color:#fff;font-weight: 700;text-align: center;position: -webkit-sticky;position: sticky;padding: 3px;top: 0px;z-index:1;}.cat{background-color:#ffeead;font-weight:700;text-align:center;position:-webkit-sticky;position:sticky;padding:10px;top:0;z-index:1}css-icon{background-color:#1cad70;color:#eb4646;display:inline-block;height:1em;width:1em;font-size:30px;box-sizing:border-box;text-indent:-9999px;vertical-align:middle;position:relative}css-icon:after,css-icon:before{content:"";box-sizing:inherit;position:absolute;left:50%;top:50%;-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.icon-upward:before{height:.65em;width:.65em;border-style:solid;border-width:2px 0 0 2px;-ms-transform:translate(-50%,-50%) rotate(45deg);transform:translate(-50%,-50%) rotate(45deg)}.icon-upward:after{height:.8em;border-left:2px solid;top:55%}#TopBtn{bottom:45px;right:15px;position:fixed;z-index:99}.GeneratedTable tbody tr:hover{background-color:#eee}.ui-button{padding:10px 15px;border:0;border-radius:4px;background-color:#0078e7;color:#fff;font-size:.875rem}.button-success{background:#1cb841}.button-error{background:#ca3c3c}.button-warning{background:#df7514}.button-secondary{background:#42b8dd}.allkey>tr>td:first-child{width:30%!important}[tooltip]{position:relative}[tooltip]:after,[tooltip]:before{text-transform:none;font-size:.9em;line-height:1.5;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;pointer-events:none;position:absolute;display:none;opacity:0}[tooltip]:before{content:"";border:5px solid transparent;z-index:1001}[tooltip]:after{content:attr(tooltip);text-align:left;width:20em;padding:1ch 1.5ch;border-radius:.3ch;box-shadow:0 1em 2em -.5em rgba(0,0,0,.35);background:#000;color:#fff;z-index:1000}[tooltip]:hover:after,[tooltip]:hover:before{display:block}[tooltip=""]:after,[tooltip=""]:before{display:none!important}[tooltip]:not([flow]):before{bottom:100%;border-bottom-width:0;border-top-color:#000}[tooltip]:not([flow]):after{bottom:calc(100% + 5px)}[tooltip]:not([flow]):after,[tooltip]:not([flow]):before{left:50%;-webkit-transform:translate(-50%,-.5em);transform:translate(-50%,-.5em)}@-webkit-keyframes tooltips-vert{to{opacity:.9;-webkit-transform:translate(-50%);transform:translate(-50%)}}@keyframes tooltips-vert{to{opacity:.9;-webkit-transform:translate(-50%);transform:translate(-50%)}}[tooltip]:not([flow]):hover:after,[tooltip]:not([flow]):hover:before{-webkit-animation:tooltips-vert .15s ease-out forwards;animation:tooltips-vert .15s ease-out forwards}input{box-sizing:border-box;padding-left:50px;height:40px;outline:0;border:1px solid #666;border-radius:4px;color:#4c5161;font-size:14px;transition:border-color .2s,background-color .2s;-webkit-appearance:none}hr{color:#666;font-size:15px;font-weight:400;line-height:1.5;overflow:visible;text-align:inherit;margin:0 0 20px;border:0;border-top:1px solid #e5e5e5}.link_head{line-height:1.4;color:inherit}.subtitle{position:relative;color:#4c5161;height:45px;line-height:45px;text-align:center}.subtitle:before{left:2%}.subtitle:after,.subtitle:before{content:"";position:absolute;width:30%;height:1px;top:50%;background-color:#a2a9b6}.subtitle:after{right:2%}@media (max-width:40rem){.right{float:none}.allkey [tooltip]:not([flow])::after,.allkey [tooltip]:not([flow])::before {left: 90%;}}
    .ui-lightip{display:none;width:25em;margin:0 auto;border-radius:2px;text-align:center;font-size:14px;line-height:20px;padding:15px 1em;background-color:#4c5161;animation:fadeIn .25s both;position:fixed;top:0;left:1rem;right:1rem;z-index:19;outline:0;cursor:default}.ui-lightip[open]{display:inline}.ui-lightip[data-status=success]{background-color:#1cad70}.ui-lightip-text{display:inline-block;background-repeat:no-repeat;background-size:20px 20px;text-align:left;color:#fff}@media screen and (max-width:640px){.ui-lightip{width:auto;top:50%;left:50%;right:auto;max-width:calc(100% - 2rem - 2em);transform:translate(-50%,-50%)}}</style>
    <style id="theme-options-filter"></style>
</head>
<body>
        <div align="center"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAMAAACdt4HsAAAABGdBTUEAALGPC/xhBQAAAwBQTFRFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgICEBETJScuMjU/NjtHNz1Ktksst0ss0GU20WU20GQ20GQ20WQ20GQ20GQ20GQ20GU3z2U30GY2z2Y4zmc6zWg6zGo8y2o96ZBd7JFd7JFd7JJd7LqO7sSb78ab7sec7sid7sid7sid78ql78uk8s+r99a689i5+dq/9t/G+e3c/u/h/vLl/PPm/fTp/uvb/ujW/eTQ/ODK+97G7smf7cmg7cme7Mmg7Mmg7Mmg7cif7sie8MSZ8sKW8cGV8r6S8LuP8LiM77KF761/7qh57aRz7qFw7Zxq7Jln65dk7JVi65Vg7ZNe7JBX7JFX7pFX7pFW8JBX8I5V5o1c7oxS7YxS7oxT7oxT6I1X741U741T7YxS7oxS4ota64tP5YtX4YpZ4YlY6opP6IlP6YlP64pN64pM64pN7IpN64pN6olN64pM64pM64lL64lL64lL6olL6ohK64hJ6ohJ6ohK6ohJ64hK6ohK64hJ64hJ6odJ6odJ6odI6odH64dI6odH6oZG6oZG6oZG6oZF6oZF6oVF6oVF6oVF6YVG6YVF6IRF6INF54JF5IBF439F3n1H4H1E33tE3XlC3HdB2nVB23Q/2nI+23E92W892G4812071mw71Ws71Gs70mo70Wo8zms9zGo9ymo+0Wc30Wc30Wc30Wc30Wc30WY20WY20WY20GU2z2U2z2Q1zmQ1zmQ1zmQ1zmQ1zWM2zmM1zGA0y180yl40yl0zyVwznFxEyFszlltExloyh1lGjllFxVgyolhAw1YxwVUwpVY9gFVEq1I5d1JEvlEvu08usU41uU0tcE1BuUwsuEwsuEwss0wzt0sst0ssaEtDtUottEoutEovtEovtEowZEpDtEoxtEoxtEoys0kws0kws0kxs0kxs0kxYkhCXkdCW0VBVkJBUEFBT0FBO0BOPUBMOkBOPEBNSj9BSD9BPz9HPj9IQj5BOT5LQD1BRTw+G6wsUgAAADx0Uk5TAAAAAAAAAAAAAAAABy2By+/7/v7++PPo286wpo2fqv7G1+f2+v7+/v4qP/r6+vj5Vv79/Xr+nMf9/OjxZ89MegAAAAFiS0dEYMW3fBAAAAfASURBVFjDpZdfTFpZHsd98sUXqWM7D5P4hJHZ3SaNu5OazOyO1VQUFKxFxIj8ETV6awMS9kYSsvKnCSgJ4wNRKtXartPq6KCJIagPF6VgbFkZs7Q2xjjNVE2njW3d2slkN1n2d869iPWC6e5+rxJyc76f8z2/c84vISub0Wo4tJz9kVoOhVeT37OOAUIfD1hhA6JAyM75SEB4NcoCrEVXPzoBBGADYmvRldBS8Oynn/EyBjmXH0RaDq1G11iAeDy2Fl6i8imK4mWaOf9sAPxLodW1eJwNeByPr4WoYH5+kMoECOQjQCgaj29ssACPQUAIUjAkvT0nOxAIUtRyNL6xs7PFAmwgPV5bpqjF4MLCfOCk/bNPAyDwr21s/LSzs8MCbG5ubm9vIsL8wsJCIHCykufO5SPCcmzj+fPnGQCbnyACNT8/jwAnFM2fC8xToRiafScd4BPw5+U9234cpdICwrEQRa3Ef/5578XeXgZAHgBe0oRAYO67seGhQZerr++bgQFXn2s0HFtdiT9/+erFi72dDEsA/7OXQFihqEDgu/ERD/gB4BoAgss1GsrLA/8rhpAJ8OzZ9gaEDczdvz08hP2gbyDEwODoUt7+kT99EWEftmEvY6vBwOSdEY87CaAJQ7fmNvb3X21t7e1tbWU4B5tghyMdoibvjtxkAvTTCCAMeMZj+/tbtNKeRHwaY9FQYPLu6M0hXAGHo7+/39FHV2LAcye0tb//YuvJkydpLhMoBncyTM1N3B0d9gwCwOlAAHt/f5IwdGs8urWz9yTNZVpDgq6yTM3e/+vtWx4cAPx2JJyhDzZjcNAzMh1Ft4bd0lbD4fCDB0uB2YnxOyN4AU7GDrrhsCCEyzU4MDQ8NhWKsRvKg+XlpaWlIPi/vTN60wN2Z9Jutd4AWSx4Ha7BIc/w7fsUC4DcQexHBXCn/FYrAtAMlMHlcg96hkdYAHDDDZiduIcK4HZC6ZIyW9FjtZohhMPhQtncQx4WAF1h/+wMKsDwUGrxdqudtjMAu8Pp7Hc6XW4WAF12/8zEPbQAh8OGvBYzDgC6YTVihsVuQa+ckCIdAAX4dmxk2O0wm8xYMC2W0WQ0ohxmu9kCCHQ6WAA/BkyOww44zVY9SSKGBf5NtEh44JUePnA8FqDAjwAz90fd/f1mo5FEwjmw2WQCJ2n8i9EAb9MDZv1+/ywQxnp0OoOBoAEpGfXwkjCQBNljspnTAgoKZhHgno3LlTW3qwnIfEToNXYTao1G06Zp05noYNm8nJMJCpB/kRqT1oqvFEIEDMBBSL1e28qVKpVSpd2u02LCBwnOFkB6ZJ+Zmf/hUZfgT1/+ocaGnSZ6IXriWk3x18WC2kjES2hJvDM9VvMRoKDAjwSEiem/vXkqulhS8rXWZqLnx1FI6R9LSkqKH+a+vWbQ0QCTOQXwF/iZCBPTjxK/PkSDZQ7YRD1spwEh9Fe/Kin5UvTP3ANlh87AnJIPAX4MmJyOvDt4IyopuSgl+3p70fwGA2nqtSiLL351eZeT+5rUdejQBkO+Y0ugA6AiTEXevnm3e7n4skRr0fei9Dq09ZYuiajzTSKRu+7s0LABfthCPwPwPT04ONh92NmpJY1MDUDa65HX7xIA8JE6nY40nVwC2kIEmJqa8q0fwMBERKsluvXdJBSB0JEE4f0hkZuAFXhtuh5IwAB4RwBmF8DvizzlcBJ/9+nUAEAVgIOpIwi7N/L09Y+PfF5SS2q1WnzE6ASLoPkjwPi0z/e9F6TVqAmim8AAnUGt1ujs6LVXR2pN4AeAjVaWn94A+JyfnZ4aHxtxtzcr1KqWFjUQEICAvw61Wt0BR7lD2wPT90BtbEllLS7As7gYXHpATY95vV2FMlkjqKVdhQnd3QSWWtPW1qZQyFtbWwGBriN0LegL7qzvQb6psTFvp6SuViwW116pq5fJmhSQAAEIBtABgOZmWb1EUi+tb1B2dl4HkfBkVYMEAkElUlVVlVBYI6prkDXJW1QMgZFarWhsuCKuqRYKBSlVVWWVIl24cKG0rIyPKYJqsaSxUS5XqdSoBtAHgKSByyyX1dUI+GVYpWWljJEGgNBrPggINVfBL2+hZ9Yb/tyubocCappkYgGfAYAqKi4hQhaavLS0vKKCAfCTAJW63dDWeq21uVkB9YMSNNXX8MvBeAmpHIQnxgfpPB2ADgEACU6gUnnX//Hru93IdQVCyJskQj4z86VLpeWl50t5Rx3p9xUpAL+ypr5R3ihXyWXrHA7nzBnOrk2haGpqktULK4BQTgsm/eJ4S/silaBSJAUAELoSnMPDw19+OfAWFmJAdUX5EYB3sqmmAgjEDfgoqbSJ9whw5q2tEKlIWl3xu9+eZwCsrpxUJQKgwyhvNyXAf/ie86OdAYgqyvmfJwfyjgNyjgOEtTiBvNkECd6/P+SsF8owQSqCgNknfk2wEwiqrzCArreJf//rDCfhw34uVyrml/NPjmcBfiOoqSsCP7exVRl5jXuLsrBQyQUAt7ayjP/BD4h0gKRgTqVS6/X5vEr0tTCVnMfLOS1BCsDlFskapOj6oSVk89L8hDkVUFTUIK2/WldXd1XSgAAZlBEAfrDX4gYhaSj67wFIcP1BIvFpY04FiIQC3GL+Z4CwCrUpofD/AwDhtDH/AQDEeQHKq4tFAAAAAElFTkSuQmCC"></div>
    <h1 style="margin-top: 0px;"><a class="link_head" href="">神KEY</a></h1>
    <div class="center"> <a tooltip="你可以把你的资源投稿到小纸条，在打开后的页面中填写好表单即可" style="margin-right:30px;" class="ui-button button-success" href="https://alipaper.yunluo.workers.dev/tougao" target="_blank">投稿资源</a><a tooltip="实际上是腾讯图个槽，作为一个简单的交流区，顺便做吐槽平台" style="margin-right:30px;" href="https://support.qq.com/products/375895/#label=show" target="_blank" class="ui-button button-error">交流区</a><a tooltip="打开后用微信扫码关注一个公众号，这个是用来推送微信信息的，如果小纸条有资源更新的话，会通过这个公众号发信息提醒你的，强烈建议关注" class="ui-button" href="https://wxpusher.zjiecode.com/api/qrcode/Cc6DWeaxRzCYuBo5QuRavfJ486tELdDHmi5zUqixOgmvxM2yRcpYOPOqYUJ92120.jpg" target="_blank">微信订阅</a> </div>
    <div class="center" style="border:1px dashed #f00;margin: 30px 10px;padding: 20px;">
        <input type="search" placeholder="在此输入搜索内容…" id="wp-filter-search-input" class="wp-filter-search">
        <h4>当前共收录 <span class="all_num"></span> 个资源</h4>
    </div>
    <h2 class="navh2 subtitle">资源导航</h2>
    <table class="tableizer-table key_nav " style="table-layout: fixed;" width="100%">
        <tbody>
            <tr>
                <td class="tableizer-title"><a id="ds_nav" href="#hyds">电视</a></td>
                <td><a onclick="load_data('hyds');" href="javascript:;">华语</a><span class="hyds_num right"></span></td>
                <td><a onclick="load_data('rhds');" href="javascript:;">日韩</a><span class="rhds_num right"></span></td>
                <td><a onclick="load_data('omds');" href="javascript:;">欧美</a><span class="omds_num right"></span></td>
                <td><a onclick="load_data('qtds');" href="javascript:;">其他</a><span class="qtds_num right"></span></td>
            </tr>
            <tr>
                <td class="tableizer-title"><a id="dy_nav" href="#hydy">电影</a></td>
                <td><a onclick="load_data('hydy');" href="javascript:;">华语</a><span class="hydy_num right"></span></td>
                <td><a onclick="load_data('rhdy');" href="javascript:;">日韩</a><span class="rhdy_num right"></span></td>
                <td><a onclick="load_data('omdy');" href="javascript:;">欧美</a><span class="omdy_num right"></span></td>
                <td><a onclick="load_data('qtdy');" href="javascript:;">其他</a><span class="qtdy_num right"></span></td>
            </tr>
            <tr>
                <td class="tableizer-title"><a id="dm_nav" href="#hydm">动漫</a></td>
                <td><a onclick="load_data('hydm');" href="javascript:;">国漫</a><span class="hydm_num right"></span></td>
                <td><a onclick="load_data('rhdm');" href="javascript:;">日本</a><span class="rhdm_num right"></span></td>
                <td><a onclick="load_data('omdm');" href="javascript:;">欧美</a><span class="omdm_num right"></span></td>
            </tr>
            <tr>
                <td class="tableizer-title"><a id="sp_nav" href="#jlp">视频</a></td>
                <td><a onclick="load_data('jlp');" href="javascript:;">纪录</a><span class="jlp_num right"></span></td>
                <td><a onclick="load_data('zyp');" href="javascript:;">综艺</a><span class="zyp_num right"></span></td>
                <td><a onclick="load_data('jypx');" href="javascript:;">教育</a><span class="jypx_num right"></span></td>
                <td><a onclick="load_data('qtsp');" href="javascript:;">其他</a><span class="qtsp_num right"></span></td>
            </tr>
            <tr>
                <td class="tableizer-title"><a href="#hyyy">音乐</a></td>
                <td><a onclick="load_data('hyyy');" href="javascript:;">华语</a><span class="hyyy_num right"></span></td>
                <td><a onclick="load_data('rhyy');" href="javascript:;">日韩</a><span class="rhyy_num right"></span></td>
                <td><a onclick="load_data('omyy');" href="javascript:;">欧美</a><span class="omyy_num right"></span></td>
                <td><a onclick="load_data('qtyy');" href="javascript:;">其他</a><span class="qtyy_num right"></span></td>
            </tr>
            <tr>
                <td class="tableizer-title"><a href="#kfrj">软件</a></td>
                <td><a onclick="load_data('kfrj');" href="javascript:;">娱乐</a><span class="kfrj_num right"></span></td>
                <td><a onclick="load_data('xtrj');" href="javascript:;">系统</a><span class="xtrj_num right"></span></td>
                <td><a onclick="load_data('wlrj');" href="javascript:;">网络</a><span class="wlrj_num right"></span></td>
                <td><a onclick="load_data('bgrj');" href="javascript:;">办公</a><span class="bgrj_num right"></span></td>
            </tr>
            <tr>
                <td class="tableizer-title"><a href="#mh">文档</a></td>
                <td><a onclick="load_data('mh');" href="javascript:;">漫画</a><span class="mh_num right"></span></td>
                <td><a onclick="load_data('xs');" href="javascript:;">小说</a><span class="xs_num right"></span></td>
                <td><a onclick="load_data('cbs');" href="javascript:;">出版</a><span class="cbs_num right"></span></td>
                <td><a onclick="load_data('zspx');" href="javascript:;">知识</a><span class="zspx_num right"></span></td>
            </tr>
            <tr>
                <td class="tableizer-title"><a href="#qc">图片</a></td>
                <td><a onclick="load_data('qc');" href="javascript:;">汽车</a><span class="qc_num right"></span></td>
                <td><a onclick="load_data('rw');" href="javascript:;">人物</a><span class="rw_num right"></span></td>
                <td><a onclick="load_data('fj');" href="javascript:;">风景</a><span class="fj_num right"></span></td>
                <td><a onclick="load_data('qttp');" href="javascript:;">其他</a><span class="qttp_num right"></span></td>
            </tr>
            <tr>
                <td class="tableizer-title"><a href="#qt">其它</a></td>
                <td><a onclick="load_data('qt');" href="javascript:;">其他</a><span class="qt_num right"></span></td>
                <td><a onclick="load_data('qtrj');" href="javascript:;">其他软件</a><span class="qtrj_num right"></span></td>
                <td><a onclick="load_data('qtwd');" href="javascript:;">其他文档</a><span class="qtwd_num right"></span></td>
            </tr>
        </tbody>
    </table>
    <h2 class="newh2 subtitle">最近更新</h2>
    <table style="table-layout: fixed;" width="100%" class="GeneratedTable new">
        <thead>
            <tr class="tableizer-firstrow">
                <th width="15%">日期</th>
                <th width="55%">标题</th>
                <th width="30%">KEY</th>
            </tr>
        </thead>
        <tbody id="newkey"></tbody>
    </table>
    <h2 class="toph2 subtitle">置顶推荐</h2>
    <table style="table-layout: fixed;" width="100%" class="GeneratedTable top">
        <thead>
            <tr class="tableizer-firstrow">
                <th width="40%">标题</th>
                <th width="20%">KEY</th>
                <th width="40%">理由</th>
            </tr>
        </thead>
        <tbody id="topkey" class="allkey"></tbody>
    </table>
    <h2 class="subtitle">资源列表</h2>
    <table style="table-layout: fixed;" width="100%" class="GeneratedTable list">
        <thead>
            <tr class="tableizer-firstrow">
                <th width="45%">标题</th>
                <th width="30%">链接</th>
                <th width="25%">操作</th>
            </tr>
        </thead>
        <tbody id="keylist" class="allkey"></tbody>
    </table>
    <div class="center">
        <p><a target="_blank" href="https://alipaper.yunluo.workers.dev/about">关于</a></p>
        <p>
        <a target="_blank" href="https://alipaper.yunluo.workers.dev/contact">联系我</a> //
        <a target="_blank" href="https://alipaper.yunluo.workers.dev/mykey">我的投稿</a> //
        <a title="点击此处，可清空缓存" style="cursor:help;" onclick="localStorage.clear();alert('缓存已清空');" href="javascript:;">系统缓存</a>
        </p>
    </div>
    <span id="TopBtn"><a href="#">
            <css-icon class="icon-upward"></css-icon>
        </a></span>
        <script src="https://lf9-cdn-tos.bytecdntp.com/cdn/expire-1-M/clipboard.js/2.0.6/clipboard.min.js"></script>
        <script src="https://qidian.gtimg.com/lulu/pure/js/common/ui/LightTip.js"></script>
    <script>
const get_cookie = n => `; ${document.cookie}`.split(`; ${n}=`).pop().split(';').shift();

const set_cookie = (k, v, t) => document.cookie = `${k}=${v};sameSite=Lax;expires=${new Date(Date.now() + t * 360e4)}`;

//设立缓存，时间小时
const ls_set =(k,v,t) => {
	    const obj = {
        time: Date.now() + t*360e4, //时间单位H，1000*3600
        data: v, //存储值
    };
    localStorage.setItem(k, JSON.stringify(obj));
}

//获取缓存 const humanFileSize = (bytes) => {
const ls_get = (k) => {
  if (!localStorage.getItem(k)) return undefined;
  const { time, data } = JSON.parse(localStorage.getItem(k));
  if (time < Date.now()) {
    localStorage.removeItem(k);
    return undefined;
  }
  return data;
};

//判断空
const isEmpty = (t) => {
    return "" === t || ("null" === t || ("undefined" === t || (!t && 0 !== t && "" !== t || (!(!Array.prototype.isPrototypeOf(t) || 0 !== t.length) || (!(!Object.prototype.isPrototypeOf(t) || 0 !== Object.keys(t).length) || "{}" === JSON.stringify(t))))));
}

//分类代码转化
const cat_code = (a) => {
    var d, e, b = [ "华语电视", "日韩电视", "欧美电视", "其他电视", "华语电影", "日韩电影", "欧美电影", "其他电影", "华语动漫", "日韩动漫", "欧美动漫", "纪录片", "综艺片", "教育培训", "其他视频", "华语音乐", "日韩音乐", "欧美音乐", "其他音乐", "娱乐软件", "系统软件", "网络软件", "办公软件", "其他软件", "漫画", "小说", "出版书", "知识培训", "其他文档", "汽车", "人物", "风景", "其他图片", "其他" ], c = [ "hyds", "rhds", "omds", "qtds", "hydy", "rhdy", "omdy", "qtdy", "hydm", "rhdm", "omdm", "jlp", "zyp", "jypx", "qtsp", "hyyy", "rhyy", "omyy", "qtyy", "kfrj", "xtrj", "wlrj", "bgrj", "qtrj", "mh", "xs", "cbs", "zspx", "qtwd", "qc", "rw", "fj", "qttp", "qt" ];
    for (d = 0, e = c.length; e > d; d++) if (c[d] == a) return b[d];
}
//描述
const des_mb = (a) => isEmpty(a) ? "" :a.substring(0, 200);

const getkey = (s) => s.substring(0,4) + "…"+s.substring(s.length-4);

//点击加载分类数据
const load_data = (e) =>{
    if (isEmpty(ls_get(e + "_data"))) {
        fetch("data/" + e + ".json")
            .then(response => response.json())
            .then(data => {
                console.log('Fetch api');
                var $json = document.getElementById("keylist"), json = "";
                /**分类列表*/
                json += '<tr><td class="cat" colspan="3"><a id="' + data.info.code + '">' + data.info.name + "</a></td></tr>";
                for (let j = 0, v = data.data, lens = v.length; j < lens; j++) {
                    json += '<tr data_key="[' + v[j].title.toLowerCase() + des_mb(v[j].des) + v[j].key.toLowerCase() + ']"><td class="key_' + v[j].key + '" tooltip="' + des_mb(v[j].des) + '">' + v[j].title + '</td><td><a class="keybtn" style="cursor:pointer;" data-clipboard-action="copy" data-clipboard-text="' + v[j].key + '">' + getkey( v[j].key) + '</a> </td><td><a class="tousu" target="_blank" href="https://alipaper.yunluo.workers.dev/tousu?id=' + v[j].key + "&cat=" + v[j].cat + "&title=" + v[j].title + '" title="若此资源无效或违规，请投诉">投诉</a><span> 丨 </span><a class="update" target="_blank" href="https://alipaper.yunluo.workers.dev/update?id=' + v[j].key + "&cat=" + v[j].cat + "&title=" + v[j].title + "&des=" + des_mb(v[j].des) + '" title="资源管理员可以更新">更新</a></td></tr>';
                }
                $json.innerHTML = json;
                window.location.hash = "#" + e;
                /*加入缓存*/
                ls_set(e + '_data', json, 3);
            })
            .catch(error => console.error('Error:', error));
    } else {
        console.log('Cache api');
        document.getElementById("keylist").innerHTML = ls_get(e + '_data');
        window.location.hash = "#" + e;
    }
};

//开始执行
(function () {
    var all_num = get_cookie("all_num"), cats_num = ls_get("cats_num"), cat_num = {};
    var cat_arr = ['hyds', 'rhds', 'omds', 'qtds', 'hydy', 'rhdy', 'omdy', 'qtdy', 'hydm', 'rhdm', 'omdm', 'jlp', 'zyp', 'jypx', 'qtsp', 'hyyy', 'rhyy', 'omyy', 'qtyy', 'kfrj', 'xtrj', 'wlrj', 'bgrj', 'qtrj', 'mh', 'xs', 'cbs', 'zspx', 'qtwd', 'qc', 'rw', 'fj', 'qttp', 'qt'];
    document.getElementsByClassName("all_num")[0].innerText = all_num;

    for (var i = 0, len = cat_arr.length; i < len; i++) {
        if (!isEmpty(cats_num)) {
            document.getElementsByClassName(cat_arr[i] + "_num")[0].innerText = cats_num[cat_arr[i]];
        }
    }
    /*请求数据*/
    if (isEmpty(ls_get("new_data")) || isEmpty(ls_get("home_data"))) {
        fetch("home.json")
            .then(response => response.json())
            .then(data => {
                var $json = document.getElementById("keylist"), $new = document.getElementById("newkey"), $top = document.getElementById("topkey"),
                    json = "", newkey = "" ,topkey = "";
                isEmpty(all_num) && (document.getElementsByClassName("all_num")[0].innerText = data.info.key_num,
                set_cookie("all_num", data.info.key_num, 3));

                /* 最新列表 */
                for (let i = 0, k = data.info.new, len = k.length; i < len; i++) {
                    newkey += "<tr><td>" + k[i].date + '</td><td tooltip="' + des_mb(k[i].des) + '">【' + cat_code(k[i].cat) + "】" + k[i].title + '</td><td><a class="keybtn" style="cursor:pointer;" data-clipboard-action="copy" data-clipboard-text="' + k[i].key + '">' + getkey( k[i].key) + "</a></td></tr>";
                }
                $new.innerHTML = newkey;
                ls_set("new_data", newkey, 1);

                /* 置顶推荐 */
                for (let i = 0, k = data.info.top, len = k.length; i < len; i++) {
                    topkey += "<tr><td tooltip=\"" + des_mb(k[i].des) + "\">" + k[i].title + "</td><td><a class=\"keybtn\" style=\"cursor:pointer;\" data-clipboard-action=\"copy\" data-clipboard-text=\"" + k[i].key + "\">打开链接</a></td><td>" + k[i].why + "</td></tr>";
                }
                $top.innerHTML = topkey;
                ls_set("top_data", topkey, 1);
                /**分类列表*/
                for (let i = 0, k = data.data, len = k.length; i < len; i++) {
                    if (isEmpty(cats_num)) {
                        document.getElementsByClassName(k[i].info.code + "_num")[0].innerText = k[i].info.cat_num;
                        cat_num[k[i].info.code] = k[i].info.cat_num;
                    }
                    json += '<tr><td class="cat" colspan="3"><a name="' + k[i].info.code + '">' + k[i].info.name + "</a></td></tr>";
                    for (let j = 0, v = k[i].data, lens = v.length; j < lens; j++) {

                        json += '<tr data_key="[' + v[j].title.toLowerCase() + des_mb(v[j].des) + v[j].key.toLowerCase() + ']"><td class="key_' + v[j].key + '" tooltip="' + des_mb(v[j].des) + '">' + v[j].title + '</td><td><a class="keybtn" style="cursor:pointer;" data-clipboard-action="copy" data-clipboard-text="' + v[j].key + '">' + getkey( v[j].key) + '</a></td><td><a class="tousu" target="_blank" href="https://alipaper.yunluo.workers.dev/tousu?id=' + v[j].key + "&cat=" + v[j].cat + "&title=" + v[j].title + '" title="若此资源无效或违规，请投诉">投诉</a><span> 丨 </span><a class="update" target="_blank" href="https://alipaper.yunluo.workers.dev/update?id=' + v[j].key + "&cat=" + v[j].cat + "&title=" + v[j].title + "&des=" + des_mb(v[j].des) + '" title="资源管理员可以更新">更新</a></td></tr>';
                    }
                }

                $json.innerHTML = json;
                ls_set("home_data", json, 1);
                set_cookie("alert_token_new", data.info.alert_token, 99999);
                set_cookie("alert_msg", data.info.msg, 99999);
                isEmpty(cats_num) && ls_set("cats_num", cat_num, 3);
            })
            .catch(error => console.error('Error:', error));
    } else {
        document.getElementById("newkey").innerHTML = ls_get("new_data");
        document.getElementById("topkey").innerHTML = ls_get("top_data");
        document.getElementById("keylist").innerHTML = ls_get("home_data");
    }

    isEmpty(get_cookie("alert_token")) && get_cookie("alert_token") != get_cookie("alert_token_new") && (document.getElementsByTagName("body")[0].insertAdjacentHTML("beforeBegin", "<div class='msg'>" + get_cookie("alert_msg") + "<a style='float:right' id='closeit' href='javascript:;'>╳</a> </div>"),
        document.getElementById("closeit").onclick = function () {
            document.getElementsByClassName("msg")[0].remove(), set_cookie("alert_token", get_cookie("alert_token_new"), 99999);
        })

}()) //结束

/** 站内搜索功能 */
var themeOptionsFilter = document.getElementById("theme-options-filter"), wpFilterSearchInput = document.getElementById("wp-filter-search-input"), searchtxt = '';
wpFilterSearchInput.addEventListener("change", function () {
    themeOptionsFilter.innerText = ".key_nav,.new,.top,.toph2,.navh2,.newh2{display:none}";
    if (isEmpty(wpFilterSearchInput.value)) {
        themeOptionsFilter.innerText = "";
        document.getElementById("keylist").innerHTML = ls_get("home_data");
    } else {
        if (isEmpty(ls_get("all_json"))) {
            fetch("all.json")
                .then(response => response.json())
                .then(data => {
                console.log('Search Fetch Api');
                for (let c = 0, d = data.data, lens = d.length; c < lens; c++) {
                    if ( d[c].title.trim().toLowerCase().search(wpFilterSearchInput.value.trim().toLowerCase()) != -1 || d[c].des.trim().toLowerCase().search(wpFilterSearchInput.value.trim().toLowerCase()) != -1) {
                        searchtxt += '<tr><td class="key_' + d[c].key + '" tooltip="' + des_mb(d[c].des) + '">【' + cat_code(d[c].cat) + '】' + d[c].title + '</td><td><a class="keybtn" style="cursor:pointer;" data-clipboard-action="copy" data-clipboard-text="' + d[c].key + '">' + getkey( d[c].key) + '</a></td><td><a class="tousu" target="_blank" href="https://alipaper.yunluo.workers.dev/tousu?id=' + d[c].key + "&cat=" + d[c].cat + "&title=" + d[c].title + '" title="若此资源无效或违规，请投诉">投诉</a><span> 丨 </span><a class="update" target="_blank" href="https://alipaper.yunluo.workers.dev/update?id=' + d[c].key + "&cat=" + d[c].cat + "&title=" + d[c].title + "&des=" + des_mb(d[c].des) + '" title="资源管理员可以更新">更新</a></td></tr>';
                        
                    }
                }
                    document.getElementById("keylist").innerHTML = searchtxt;
                    ls_set('all_json', data, 1);
                    searchtxt = '';
                })
                .catch(error => console.error('Error:', error));
        }else{
            console.log('Search Cache Api');
            for (let j = 0, v = ls_get("all_json").data, lens = v.length; j < lens; j++) {
                if (v[j].title.trim().toLowerCase().search(wpFilterSearchInput.value.trim().toLowerCase()) != -1 || v[j].des.trim().toLowerCase().search(wpFilterSearchInput.value.trim().toLowerCase()) != -1) {
                    searchtxt += '<tr><td class="key_' + v[j].key + '" tooltip="' + des_mb(v[j].des) + '">【' + cat_code(v[j].cat) + '】' + v[j].title + '</td><td><a class="keybtn" style="cursor:pointer;" data-clipboard-action="copy" data-clipboard-text="' + v[j].key + '">' + getkey( v[j].key) + '</a></td><td><a class="tousu" target="_blank" href="https://alipaper.yunluo.workers.dev/tousu?id=' + v[j].key + "&cat=" + v[j].cat + "&title=" + v[j].title + '" title="若此资源无效或违规，请投诉">投诉</a><span> 丨 </span><a class="update" target="_blank" href="https://alipaper.yunluo.workers.dev/update?id=' + v[j].key + "&cat=" + v[j].cat + "&title=" + v[j].title + "&des=" + des_mb(v[j].des) + '" title="资源管理员可以更新">更新</a></td></tr>';
                }
            }
            document.getElementById("keylist").innerHTML = searchtxt;
            searchtxt = '';
        }

    }

});

//加载完毕执行
window.onload = function () {
    /** 统计代码 **/
    var t = document.createElement("script");
    //t.src = "https://v1.cnzz.com/z_stat.php?id=1280771259&web_id=1280771259", document.getElementsByTagName("body")[0].appendChild(t);
    var clipboardDemos = new ClipboardJS('.keybtn'); clipboardDemos.on('success', function (e) {
                e.clearSelection();
                new LightTip('您已复制完成!');
    });

};
//滑动执行
window.onscroll = function () {
    var e = document.getElementById("keylist").offsetTop, t = document.documentElement.scrollTop, o = e - t, n = document.getElementsByClassName("msg");
    n.length > 0 && (n[0].style.position = o < -1800 ? "relative" : "sticky");
};
    </script>
</body>
</html>